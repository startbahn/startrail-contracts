<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="2434pt" height="743pt"
 viewBox="0.00 0.00 2433.65 743.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 739)">
<title>UmlClassDiagram</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-739 2429.6502,-739 2429.6502,4 -4,4"/>
<!-- 1 -->
<g id="node1" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="#000000" points="858.4669,-321.9 858.4669,-446.7 1397.3445,-446.7 1397.3445,-321.9 858.4669,-321.9"/>
<text text-anchor="middle" x="1127.9057" y="-430.1" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="1127.9057" y="-413.3" font-family="Times,serif" font-size="14.00" fill="#000000">IMetaTxForwarderV2</text>
<polyline fill="none" stroke="#000000" points="858.4669,-405.1 1397.3445,-405.1 "/>
<text text-anchor="middle" x="1127.9057" y="-388.5" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="858.4669,-380.3 1397.3445,-380.3 "/>
<text text-anchor="start" x="866.4669" y="-363.7" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="866.4669" y="-346.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;executeTransactionLUW(_request: ExecutionRequest, _signatures: bytes): (success: bool)</text>
<text text-anchor="start" x="866.4669" y="-330.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;executeTransactionEOA(_request: ExecutionRequest, _signature: bytes): (success: bool)</text>
</g>
<!-- 2 -->
<g id="node2" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="#000000" points="433.8664,-626.5 433.8664,-717.7 543.945,-717.7 543.945,-626.5 433.8664,-626.5"/>
<text text-anchor="middle" x="488.9057" y="-701.1" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="488.9057" y="-684.3" font-family="Times,serif" font-size="14.00" fill="#000000">IMetaTxRequest</text>
<polyline fill="none" stroke="#000000" points="433.8664,-676.1 543.945,-676.1 "/>
<text text-anchor="middle" x="488.9057" y="-659.5" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="433.8664,-651.3 543.945,-651.3 "/>
<text text-anchor="middle" x="488.9057" y="-634.7" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge3" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1050.5731,-446.8481C996.7527,-487.7423 921.8271,-539.6122 848.9057,-573.2 759.146,-614.5436 648.6066,-641.7217 573.8788,-656.9425"/>
<polygon fill="none" stroke="#000000" points="571.6395,-646.6814 544.2101,-662.7401 575.667,-667.2916 571.6395,-646.6814"/>
</g>
<!-- 2struct0 -->
<g id="node3" class="node">
<title>2struct0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="0,-317.5 0,-451.1 119.8114,-451.1 119.8114,-317.5 0,-317.5"/>
<text text-anchor="middle" x="59.9057" y="-434.5" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="59.9057" y="-417.7" font-family="Times,serif" font-size="14.00" fill="#000000">ExecutionRequest</text>
<polyline fill="none" stroke="#000000" points="0,-409.5 119.8114,-409.5 "/>
<text text-anchor="start" x="8" y="-392.9" font-family="Times,serif" font-size="14.00" fill="#000000">typeHash: bytes32</text>
<text text-anchor="start" x="8" y="-376.1" font-family="Times,serif" font-size="14.00" fill="#000000">from: address</text>
<text text-anchor="start" x="8" y="-359.3" font-family="Times,serif" font-size="14.00" fill="#000000">nonce: uint256</text>
<text text-anchor="start" x="8" y="-342.5" font-family="Times,serif" font-size="14.00" fill="#000000">suffixData: bytes</text>
<text text-anchor="start" x="8" y="-325.7" font-family="Times,serif" font-size="14.00" fill="#000000">callData: bytes</text>
</g>
<!-- 2struct0&#45;&gt;2 -->
<g id="edge1" class="edge">
<title>2struct0&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M68.7309,-451.4309C77.4605,-491.9823 94.7503,-541.7399 128.9057,-573.2 171.4515,-612.3884 329.6681,-645.0073 421.5797,-661.1677"/>
<polygon fill="#000000" stroke="#000000" points="421.7189,-661.1918 428.3146,-658.2768 433.5421,-663.244 426.9465,-666.159 421.7189,-661.1918"/>
</g>
<!-- 3 -->
<g id="node4" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1892.1612,-25.7 1892.1612,-133.7 2425.6502,-133.7 2425.6502,-25.7 1892.1612,-25.7"/>
<text text-anchor="middle" x="2158.9057" y="-117.1" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="2158.9057" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#000000">ILicensedUserManager</text>
<polyline fill="none" stroke="#000000" points="1892.1612,-92.1 2425.6502,-92.1 "/>
<text text-anchor="middle" x="2158.9057" y="-75.5" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="1892.1612,-67.3 2425.6502,-67.3 "/>
<text text-anchor="start" x="1900.1612" y="-50.7" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1900.1612" y="-33.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;isValidSignatureSet(_walletAddress: address, _hash: bytes32, _signatures: bytes): bytes4</text>
</g>
<!-- 6 -->
<g id="node5" class="node">
<title>6</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1339.2169,-.5 1339.2169,-158.9 1874.5945,-158.9 1874.5945,-.5 1339.2169,-.5"/>
<text text-anchor="middle" x="1606.9057" y="-142.3" font-family="Times,serif" font-size="14.00" fill="#000000">MetaTxForwarderV2</text>
<polyline fill="none" stroke="#000000" points="1339.2169,-134.1 1874.5945,-134.1 "/>
<text text-anchor="start" x="1347.2169" y="-117.5" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="1347.2169" y="-100.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;IS_VALID_SIG_SUCCESS: bytes4</text>
<polyline fill="none" stroke="#000000" points="1339.2169,-92.5 1874.5945,-92.5 "/>
<text text-anchor="start" x="1347.2169" y="-75.9" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1347.2169" y="-59.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;executeTransactionLUW(_request: ExecutionRequest, _signatures: bytes): (success: bool)</text>
<text text-anchor="start" x="1347.2169" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;executeTransactionEOA(_request: ExecutionRequest, _signature: bytes): (success: bool)</text>
<text text-anchor="start" x="1347.2169" y="-25.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1347.2169" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;initialize(_nameRegistry: address)</text>
</g>
<!-- 6&#45;&gt;1 -->
<g id="edge4" class="edge">
<title>6&#45;&gt;1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1466.0818,-158.9796C1445.7455,-170.9431 1425.1853,-183.3243 1405.9057,-195.4 1350.8239,-229.9003 1291.0465,-270.1388 1241.0868,-304.5911"/>
<polygon fill="none" stroke="#000000" points="1234.9853,-296.0445 1216.3048,-321.7601 1246.9445,-313.3065 1234.9853,-296.0445"/>
</g>
<!-- 7 -->
<g id="node6" class="node">
<title>7</title>
<polygon fill="#f2f2f2" stroke="#000000" points="137.5984,-195.9 137.5984,-572.7 840.213,-572.7 840.213,-195.9 137.5984,-195.9"/>
<text text-anchor="middle" x="488.9057" y="-556.1" font-family="Times,serif" font-size="14.00" fill="#000000">MetaTxRequestManager</text>
<polyline fill="none" stroke="#000000" points="137.5984,-547.9 840.213,-547.9 "/>
<text text-anchor="start" x="145.5984" y="-531.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="145.5984" y="-514.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;DOMAIN_NAME: string</text>
<text text-anchor="start" x="145.5984" y="-497.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;DOMAIN_VERSION: string</text>
<text text-anchor="start" x="145.5984" y="-480.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;DOMAIN_SEPARATOR_TYPEHASH: bytes32</text>
<text text-anchor="start" x="145.5984" y="-464.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;GENERIC_PARAMS: string</text>
<text text-anchor="start" x="145.5984" y="-447.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;typeHashes: mapping(bytes32=&gt;bool)</text>
<text text-anchor="start" x="145.5984" y="-430.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;requestTypes: mapping(bytes32=&gt;MetaTxRequestType)</text>
<text text-anchor="start" x="145.5984" y="-413.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;domainSeparator: bytes32</text>
<text text-anchor="start" x="145.5984" y="-396.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;nameRegistryAddress: address</text>
<polyline fill="none" stroke="#000000" points="137.5984,-388.7 840.213,-388.7 "/>
<text text-anchor="start" x="145.5984" y="-372.1" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="145.5984" y="-355.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__MTRM_initialize(_nameRegistryAddress: address)</text>
<text text-anchor="start" x="145.5984" y="-338.5" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="145.5984" y="-321.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;registerRequestType(_typeName: string, _typeSuffix: string, _destinationContract: address, _functionSignature: bytes4)</text>
<text text-anchor="start" x="145.5984" y="-304.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;unregisterRequestType(_typeHash: bytes32)</text>
<text text-anchor="start" x="145.5984" y="-288.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="145.5984" y="-271.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; RequestTypeRegistered(typeHash: bytes32, typeStr: string)</text>
<text text-anchor="start" x="145.5984" y="-254.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; RequestTypeUnregistered(typeHash: bytes32)</text>
<text text-anchor="start" x="145.5984" y="-237.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; requestTypeRegistered(_typeHash: bytes32)</text>
<text text-anchor="start" x="145.5984" y="-220.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyAdministrator()</text>
<text text-anchor="start" x="145.5984" y="-204.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;encodeRequest(_request: ExecutionRequest): bytes</text>
</g>
<!-- 6&#45;&gt;7 -->
<g id="edge7" class="edge">
<title>6&#45;&gt;7</title>
<path fill="none" stroke="#000000" d="M1339.1531,-98.9034C1200.3376,-113.9158 1028.5647,-140.3948 868.9255,-189.5218"/>
<polygon fill="none" stroke="#000000" points="865.7207,-179.5227 840.3116,-198.6181 872.0828,-199.5358 865.7207,-179.5227"/>
</g>
<!-- 8 -->
<g id="node8" class="node">
<title>8</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1415.0052,-305.1 1415.0052,-463.5 1798.8062,-463.5 1798.8062,-305.1 1415.0052,-305.1"/>
<text text-anchor="middle" x="1606.9057" y="-446.9" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionExecutor</text>
<polyline fill="none" stroke="#000000" points="1415.0052,-438.7 1798.8062,-438.7 "/>
<text text-anchor="start" x="1423.0052" y="-422.1" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="1423.0052" y="-405.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;EXECUTE_FAILED_WITHOUT_REASON: string</text>
<polyline fill="none" stroke="#000000" points="1415.0052,-397.1 1798.8062,-397.1 "/>
<text text-anchor="start" x="1423.0052" y="-380.5" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="1423.0052" y="-363.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;executeCall(_to: address, _data: bytes, _txHash: bytes32): bool</text>
<text text-anchor="start" x="1423.0052" y="-346.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;extractErrorMessage(_returnData: bytes): (message: string)</text>
<text text-anchor="start" x="1423.0052" y="-330.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1423.0052" y="-313.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ExecutionSuccess(txHash: bytes32)</text>
</g>
<!-- 6&#45;&gt;8 -->
<g id="edge5" class="edge">
<title>6&#45;&gt;8</title>
<path fill="none" stroke="#000000" d="M1606.9057,-158.9349C1606.9057,-194.3151 1606.9057,-236.5896 1606.9057,-274.9158"/>
<polygon fill="none" stroke="#000000" points="1596.4058,-274.9332 1606.9057,-304.9332 1617.4058,-274.9333 1596.4058,-274.9332"/>
</g>
<!-- 12 -->
<g id="node10" class="node">
<title>12</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1817.2394,-296.7 1817.2394,-471.9 2258.572,-471.9 2258.572,-296.7 1817.2394,-296.7"/>
<text text-anchor="middle" x="2037.9057" y="-455.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReplayProtection</text>
<polyline fill="none" stroke="#000000" points="1817.2394,-447.1 2258.572,-447.1 "/>
<text text-anchor="start" x="1825.2394" y="-430.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1825.2394" y="-413.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;UINT_128_SHIFT: uint256</text>
<text text-anchor="start" x="1825.2394" y="-396.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;nonces: mapping(address=&gt;mapping(uint128=&gt;uint128))</text>
<polyline fill="none" stroke="#000000" points="1817.2394,-388.7 2258.572,-388.7 "/>
<text text-anchor="start" x="1825.2394" y="-372.1" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="1825.2394" y="-355.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;checkAndUpdateNonce(_wallet: address, _packedNonce: uint256): bool</text>
<text text-anchor="start" x="1825.2394" y="-338.5" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1825.2394" y="-321.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getNonce(_wallet: address, _channel: uint128): uint128</text>
<text text-anchor="start" x="1825.2394" y="-304.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;packNonce(_channel: uint128, _nonce: uint128): (noncePacked: uint256)</text>
</g>
<!-- 6&#45;&gt;12 -->
<g id="edge6" class="edge">
<title>6&#45;&gt;12</title>
<path fill="none" stroke="#000000" d="M1751.4437,-159.0308C1770.7391,-170.7377 1790.0217,-183.0345 1807.9057,-195.4 1843.9047,-220.2907 1881.2601,-249.3893 1915.1337,-277.1866"/>
<polygon fill="none" stroke="#000000" points="1908.7549,-285.538 1938.5394,-296.6349 1922.1758,-269.3862 1908.7549,-285.538"/>
</g>
<!-- 7&#45;&gt;2 -->
<g id="edge8" class="edge">
<title>7&#45;&gt;2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M488.9057,-573.0556C488.9057,-580.9754 488.9057,-588.6938 488.9057,-596.1009"/>
<polygon fill="none" stroke="#000000" points="478.4058,-596.2387 488.9057,-626.2387 499.4058,-596.2388 478.4058,-596.2387"/>
</g>
<!-- 7struct0 -->
<g id="node7" class="node">
<title>7struct0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="408.7805,-38.1 408.7805,-121.3 569.0309,-121.3 569.0309,-38.1 408.7805,-38.1"/>
<text text-anchor="middle" x="488.9057" y="-104.7" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="488.9057" y="-87.9" font-family="Times,serif" font-size="14.00" fill="#000000">MetaTxRequestType</text>
<polyline fill="none" stroke="#000000" points="408.7805,-79.7 569.0309,-79.7 "/>
<text text-anchor="start" x="416.7805" y="-63.1" font-family="Times,serif" font-size="14.00" fill="#000000">destination: address</text>
<text text-anchor="start" x="416.7805" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#000000">functionSignature: bytes4</text>
</g>
<!-- 7struct0&#45;&gt;7 -->
<g id="edge2" class="edge">
<title>7struct0&#45;&gt;7</title>
<path fill="none" stroke="#000000" d="M488.9057,-121.4147C488.9057,-138.7582 488.9057,-160.253 488.9057,-183.4231"/>
<polygon fill="#000000" stroke="#000000" points="488.9058,-183.6793 492.9057,-189.6793 488.9057,-195.6793 484.9057,-189.6792 488.9058,-183.6793"/>
</g>
<!-- 11 -->
<g id="node9" class="node">
<title>11</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1815.4894,-609.7 1815.4894,-734.5 2260.322,-734.5 2260.322,-609.7 1815.4894,-609.7"/>
<text text-anchor="middle" x="2037.9057" y="-717.9" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="2037.9057" y="-701.1" font-family="Times,serif" font-size="14.00" fill="#000000">IReplayProtection</text>
<polyline fill="none" stroke="#000000" points="1815.4894,-692.9 2260.322,-692.9 "/>
<text text-anchor="middle" x="2037.9057" y="-676.3" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
<polyline fill="none" stroke="#000000" points="1815.4894,-668.1 2260.322,-668.1 "/>
<text text-anchor="start" x="1823.4894" y="-651.5" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1823.4894" y="-634.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;getNonce(_signer: address, _channel: uint128): uint128</text>
<text text-anchor="start" x="1823.4894" y="-617.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;packNonce(_channel: uint128, _nonce: uint128): (noncePacked: uint256)</text>
</g>
<!-- 12&#45;&gt;11 -->
<g id="edge9" class="edge">
<title>12&#45;&gt;11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2037.9057,-472.2133C2037.9057,-506.132 2037.9057,-544.9675 2037.9057,-579.3312"/>
<polygon fill="none" stroke="#000000" points="2027.4058,-579.3633 2037.9057,-609.3633 2048.4058,-579.3633 2027.4058,-579.3633"/>
</g>
</g>
</svg>
